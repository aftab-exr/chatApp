:root {
    --bg-color: #0d1117;
    --text-color: #00ff41;
    --prompt-color: #008f11;
    --font-stack: 'Courier New', Courier, monospace;
}

/* THEMES */
body.amber-theme { --text-color: #ffb000; --prompt-color: #cc8800; }
body.white-theme { --bg-color: #ffffff; --text-color: #333333; --prompt-color: #000000; }
body.matrix-mode {
    --bg-color: #000000; --text-color: #0f0; --prompt-color: #0f0;
    text-shadow: 0 0 5px #0f0; font-family: 'Share Tech Mono', monospace !important;
    animation: flicker 0.15s infinite;
}
@keyframes flicker { 0% { opacity: 0.97; } 50% { opacity: 1; } 100% { opacity: 0.98; } }

* { box-sizing: border-box; }
body {
    background-color: var(--bg-color); color: var(--text-color); font-family: var(--font-stack);
    margin: 0; padding: 10px; height: 100dvh; width: 100vw;
    overflow: hidden; display: flex; flex-direction: column;
}

/* MAIN LAYOUT CONTAINER */
.terminal-window { 
    width: 100%; 
    max-width: 900px; 
    margin: 0 auto; 
    height: 100%; 
    display: flex; 
    flex-direction: row; /* <--- THIS IS KEY: Puts sidebar next to chat */
}

/* CHAT AREA */
#messages { flex-grow: 1; overflow-y: auto; margin-bottom: 10px; white-space: pre-wrap; word-wrap: break-word; }
#messages::-webkit-scrollbar { width: 5px; }
#messages::-webkit-scrollbar-thumb { background: var(--text-color); border-radius: 4px; }

.message-line { margin: 4px 0; line-height: 1.4; font-size: 1rem; }
.system-msg { opacity: 0.6; font-style: italic; }

.input-line { display: flex; align-items: center; border-top: 1px dashed var(--text-color); padding: 10px 0; }
.prompt { margin-right: 8px; color: var(--prompt-color); font-weight: bold; white-space: nowrap; }
#chat-form { width: 100%; }
input { background: transparent; border: none; color: var(--text-color); font-family: var(--font-stack); font-size: 16px; width: 100%; outline: none; }

/* SIDEBAR STYLING */
#sidebar {
    width: 200px;
    border-right: 1px dashed var(--text-color);
    padding: 10px;
    display: flex;
    flex-direction: column;
    margin-right: 10px;
}

.room-item { cursor: pointer; padding: 5px 0; opacity: 0.7; transition: opacity 0.2s; }
.room-item:hover { opacity: 1; text-shadow: 0 0 5px var(--text-color); }
.room-item.active { font-weight: bold; opacity: 1; text-decoration: underline; }

/* MOBILE RESPONSIVE */
@media (max-width: 600px) {
    /* On mobile, switch back to column so sidebar is on top */
    .terminal-window { flex-direction: column !important; }
    
    #sidebar { 
        width: 100% !important; 
        border-right: none !important; 
        border-bottom: 1px dashed var(--text-color); 
        height: 100px; /* Short scrollable area */
        overflow-y: auto; 
        margin-right: 0;
        margin-bottom: 10px;
    }
}